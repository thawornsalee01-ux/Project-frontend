{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/beck1/Desktop/PRO/frontend/app/documents/page.tsx"],"sourcesContent":["// app/documents/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  ArrowPathIcon,\r\n  DocumentTextIcon,\r\n  MagnifyingGlassIcon,\r\n  FunnelIcon,\r\n  DocumentArrowDownIcon,\r\n  ClockIcon,\r\n  ExclamationTriangleIcon,\r\n  ChartBarIcon,\r\n  HashtagIcon,\r\n  ArchiveBoxIcon,\r\n} from \"@heroicons/react/24/outline\";\r\n\r\ntype ComparisonItem = {\r\n  id: number;\r\n  document_name: string;\r\n  version_old_label: string;\r\n  version_new_label: string;\r\n  created_at: string;\r\n  overall_risk_level?: \"LOW\" | \"MEDIUM\" | \"HIGH\" | string | null;\r\n  changes_count?: number;\r\n};\r\n\r\ntype Risk = \"HIGH\" | \"MEDIUM\" | \"LOW\";\r\n\r\nconst API_BASE =\r\n  process.env.NEXT_PUBLIC_API_BASE?.trim() || \"http://127.0.0.1:8000\";\r\n\r\nfunction normalizeRisk(r?: string | null): Risk {\r\n  const x = (r || \"\").toUpperCase();\r\n  if (x.includes(\"HIGH\")) return \"HIGH\";\r\n  if (x.includes(\"MEDIUM\")) return \"MEDIUM\";\r\n  return \"LOW\";\r\n}\r\n\r\nfunction formatDate(iso: string) {\r\n  try {\r\n    return new Date(iso).toLocaleString(\"th-TH\", {\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      year: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  } catch {\r\n    return iso;\r\n  }\r\n}\r\n\r\nfunction formatDateShort(iso: string) {\r\n  try {\r\n    return new Date(iso).toLocaleDateString(\"th-TH\", {\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      year: \"numeric\",\r\n    });\r\n  } catch {\r\n    return iso;\r\n  }\r\n}\r\n\r\nfunction csvEscape(v: any) {\r\n  const s = String(v ?? \"\");\r\n  if (/[\",\\n]/.test(s)) return `\"${s.replaceAll('\"', '\"\"')}\"`;\r\n  return s;\r\n}\r\n\r\nfunction RiskPill({ r }: { r: Risk }) {\r\n  const base =\r\n    \"inline-flex items-center rounded-full px-2.5 py-1 text-[11px] font-extrabold border\";\r\n  if (r === \"HIGH\")\r\n    return <span className={`${base} bg-red-50 text-red-700 border-red-200`}>HIGH</span>;\r\n  if (r === \"MEDIUM\")\r\n    return <span className={`${base} bg-amber-50 text-amber-700 border-amber-200`}>MEDIUM</span>;\r\n  return <span className={`${base} bg-emerald-50 text-emerald-700 border-emerald-200`}>LOW</span>;\r\n}\r\n\r\nfunction clamp(n: number, min: number, max: number) {\r\n  return Math.max(min, Math.min(max, n));\r\n}\r\n\r\n// Function to highlight only changed parts in old text\r\nfunction HighlightDiffText({ oldText = \"\", newText = \"\" }: { oldText?: string; newText?: string }) {\r\n  const oldWords = (oldText || \"\").split(/(\\s+)/);\r\n  const newWords = (newText || \"\").split(/(\\s+)/);\r\n  \r\n  const oldSet = new Set(oldWords.map(w => w.toLowerCase()));\r\n  const newSet = new Set(newWords.map(w => w.toLowerCase()));\r\n  \r\n  return (\r\n    <div className=\"text-sm text-gray-700\">\r\n      {oldWords.map((word, i) => {\r\n        const isChanged = !newSet.has(word.toLowerCase());\r\n        \r\n        return (\r\n          <span\r\n            key={i}\r\n            className={\r\n              isChanged \r\n                ? \"bg-red-100 text-red-900 px-1 py-0.5 rounded line-through font-bold\" \r\n                : \"\"\r\n            }\r\n          >\r\n            {word}\r\n          </span>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Function to highlight only changed parts in new text\r\nfunction HighlightDiffTextNew({ oldText = \"\", newText = \"\" }: { oldText?: string; newText?: string }) {\r\n  const oldWords = (oldText || \"\").split(/(\\s+)/);\r\n  const newWords = (newText || \"\").split(/(\\s+)/);\r\n  \r\n  const oldSet = new Set(oldWords.map(w => w.toLowerCase()));\r\n  \r\n  return (\r\n    <div className=\"text-sm text-gray-700\">\r\n      {newWords.map((word, i) => {\r\n        const isChanged = !oldSet.has(word.toLowerCase());\r\n        \r\n        return (\r\n          <span\r\n            key={i}\r\n            className={\r\n              isChanged \r\n                ? \"bg-emerald-100 text-emerald-900 px-1 py-0.5 rounded font-bold\" \r\n                : \"\"\r\n            }\r\n          >\r\n            {word}\r\n          </span>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function DocumentsPage() {\r\n  const [items, setItems] = useState<ComparisonItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selectedDoc, setSelectedDoc] = useState<string | null>(null);\r\n\r\n  // filters\r\n  const [q, setQ] = useState(\"\");\r\n  const [riskFilter, setRiskFilter] = useState<\"ALL\" | Risk>(\"ALL\");\r\n  const [sort, setSort] = useState<\"UPDATED_DESC\" | \"NAME_ASC\" | \"RISK_DESC\" | \"CHANGES_DESC\">(\r\n    \"UPDATED_DESC\"\r\n  );\r\n\r\n  const fetchComparisons = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/comparisons?limit=250`, { cache: \"no-store\" });\r\n      if (!res.ok) throw new Error(`‡πÇ‡∏´‡∏•‡∏î comparisons ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${res.status})`);\r\n      const data: ComparisonItem[] = await res.json();\r\n      setItems(Array.isArray(data) ? data : []);\r\n    } catch (e: any) {\r\n      setError(e?.message || \"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\");\r\n      setItems([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchComparisons();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const computed = useMemo(() => {\r\n    const list = [...items].sort(\r\n      (a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n    );\r\n\r\n    // group by document\r\n    type DocRow = {\r\n      doc: string;\r\n      comparisons: number;\r\n      versionsEstimated: number;\r\n      totalChanges: number;\r\n      lastUpdatedISO: string;\r\n      lastComparisonId: number | null;\r\n      lastRisk: Risk;\r\n      lastFromTo: string;\r\n      allComparisons: ComparisonItem[];\r\n    };\r\n\r\n    const byDoc = new Map<\r\n      string,\r\n      {\r\n        doc: string;\r\n        comparisons: number;\r\n        vset: Set<string>;\r\n        totalChanges: number;\r\n        lastUpdatedISO: string;\r\n        lastComparisonId: number | null;\r\n        lastRisk: Risk;\r\n        lastFromTo: string;\r\n        allComparisons: ComparisonItem[];\r\n      }\r\n    >();\r\n\r\n    for (const x of list) {\r\n      const doc = (x.document_name || \"Untitled\").trim() || \"Untitled\";\r\n      const cur = byDoc.get(doc) || ({\r\n        doc,\r\n        comparisons: 0,\r\n        vset: new Set<string>(),\r\n        totalChanges: 0,\r\n        lastUpdatedISO: x.created_at,\r\n        lastComparisonId: x.id,\r\n        lastRisk: normalizeRisk(x.overall_risk_level),\r\n        lastFromTo: `${x.version_old_label} ‚Üí ${x.version_new_label}`,\r\n        allComparisons: [],\r\n      } as any);\r\n\r\n      cur.comparisons += 1;\r\n      if (x.version_old_label) cur.vset.add(x.version_old_label);\r\n      if (x.version_new_label) cur.vset.add(x.version_new_label);\r\n      cur.totalChanges += x.changes_count ?? 0;\r\n      cur.allComparisons.push(x);\r\n\r\n      // list is sorted desc; first time we see a doc = latest\r\n      if (!byDoc.has(doc)) {\r\n        cur.lastUpdatedISO = x.created_at;\r\n        cur.lastComparisonId = x.id;\r\n        cur.lastRisk = normalizeRisk(x.overall_risk_level);\r\n        cur.lastFromTo = `${x.version_old_label} ‚Üí ${x.version_new_label}`;\r\n      }\r\n\r\n      byDoc.set(doc, cur);\r\n    }\r\n\r\n    const rows: DocRow[] = [...byDoc.values()].map((x) => ({\r\n      doc: x.doc,\r\n      comparisons: x.comparisons,\r\n      versionsEstimated: x.vset.size,\r\n      totalChanges: x.totalChanges,\r\n      lastUpdatedISO: x.lastUpdatedISO,\r\n      lastComparisonId: x.lastComparisonId,\r\n      lastRisk: x.lastRisk,\r\n      lastFromTo: x.lastFromTo,\r\n      allComparisons: x.allComparisons,\r\n    }));\r\n\r\n    // filters\r\n    const qq = q.trim().toLowerCase();\r\n    let filtered = rows.filter((r) => {\r\n      const okQ = !qq ? true : r.doc.toLowerCase().includes(qq);\r\n      const okRisk = riskFilter === \"ALL\" ? true : r.lastRisk === riskFilter;\r\n      return okQ && okRisk;\r\n    });\r\n\r\n    // sort\r\n    const riskScore = (r: Risk) => (r === \"HIGH\" ? 3 : r === \"MEDIUM\" ? 2 : 1);\r\n\r\n    filtered.sort((a, b) => {\r\n      if (sort === \"NAME_ASC\") return a.doc.localeCompare(b.doc);\r\n      if (sort === \"RISK_DESC\") {\r\n        const d = riskScore(b.lastRisk) - riskScore(a.lastRisk);\r\n        if (d !== 0) return d;\r\n        return new Date(b.lastUpdatedISO).getTime() - new Date(a.lastUpdatedISO).getTime();\r\n      }\r\n      if (sort === \"CHANGES_DESC\") {\r\n        return b.totalChanges - a.totalChanges;\r\n      }\r\n      return new Date(b.lastUpdatedISO).getTime() - new Date(a.lastUpdatedISO).getTime();\r\n    });\r\n\r\n    // KPIs\r\n    const totalDocs = rows.length;\r\n    const totalComparisons = list.length;\r\n    const totalVersionsEstimated = rows.reduce((s, r) => s + r.versionsEstimated, 0);\r\n\r\n    const highDocs = rows.filter((r) => r.lastRisk === \"HIGH\").length;\r\n    const medDocs = rows.filter((r) => r.lastRisk === \"MEDIUM\").length;\r\n    const lowDocs = rows.filter((r) => r.lastRisk === \"LOW\").length;\r\n\r\n    // top changes\r\n    const topChanged = [...rows]\r\n      .sort((a, b) => b.totalChanges - a.totalChanges)\r\n      .slice(0, 5);\r\n\r\n    const maxChanges = Math.max(1, ...topChanged.map((x) => x.totalChanges));\r\n\r\n    // Get selected document details\r\n    const selectedDocDetails = selectedDoc \r\n      ? rows.find(r => r.doc === selectedDoc)\r\n      : null;\r\n\r\n    return {\r\n      rows,\r\n      filtered,\r\n      totalDocs,\r\n      totalComparisons,\r\n      totalVersionsEstimated,\r\n      riskSummary: { highDocs, medDocs, lowDocs },\r\n      topChanged,\r\n      maxChanges,\r\n      selectedDocDetails,\r\n      allComparisons: list,\r\n    };\r\n  }, [items, q, riskFilter, sort, selectedDoc]);\r\n\r\n  const downloadDocsCSV = () => {\r\n    const rows = computed.filtered;\r\n    const headers = [\r\n      \"document_name\",\r\n      \"comparisons\",\r\n      \"versions_estimated\",\r\n      \"total_changes\",\r\n      \"last_updated\",\r\n      \"last_risk\",\r\n      \"last_from_to\",\r\n      \"last_comparison_id\",\r\n    ];\r\n\r\n    const csv =\r\n      [headers.join(\",\")]\r\n        .concat(\r\n          rows.map((r) =>\r\n            [\r\n              csvEscape(r.doc),\r\n              csvEscape(r.comparisons),\r\n              csvEscape(r.versionsEstimated),\r\n              csvEscape(r.totalChanges),\r\n              csvEscape(r.lastUpdatedISO),\r\n              csvEscape(r.lastRisk),\r\n              csvEscape(r.lastFromTo),\r\n              csvEscape(r.lastComparisonId ?? \"\"),\r\n            ].join(\",\")\r\n          )\r\n        )\r\n        .join(\"\\n\") + \"\\n\";\r\n\r\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `documents_export_${new Date().toISOString().slice(0, 10)}.csv`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\r\n      <div className=\"max-w-7xl mx-auto p-4 md:p-6\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n            <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">üìÅ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h1>\r\n                <p className=\"mt-1 text-gray-600\">\r\n                  ‡∏î‡∏π‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex flex-wrap items-center gap-2\">\r\n                <button\r\n                  onClick={fetchComparisons}\r\n                  disabled={loading}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg bg-gray-900 px-4 py-2.5 text-sm font-medium text-white hover:bg-gray-800 disabled:opacity-60\"\r\n                >\r\n                  <ArrowPathIcon className={`h-4 w-4 ${loading ? \"animate-spin\" : \"\"}`} />\r\n                  ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà\r\n                </button>\r\n\r\n                <button\r\n                  onClick={downloadDocsCSV}\r\n                  disabled={computed.filtered.length === 0}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-60\"\r\n                >\r\n                  <DocumentArrowDownIcon className=\"h-5 w-5 text-emerald-600\" />\r\n                  Export CSV\r\n                </button>\r\n\r\n                <Link\r\n                  href=\"/history\"\r\n                  className=\"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n                >\r\n                  <ClockIcon className=\"h-5 w-5 text-gray-600\" />\r\n                  ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"mt-4 rounded-xl border border-red-200 bg-red-50 px-4 py-3\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <ExclamationTriangleIcon className=\"h-5 w-5 text-red-500 mt-0.5\" />\r\n                  <div>\r\n                    <div className=\"text-sm font-medium text-red-800\">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>\r\n                    <div className=\"text-sm text-red-600 mt-1\">{error}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Statistics Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                <DocumentTextIcon className=\"h-5 w-5 text-blue-600\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-gray-900\">{computed.totalDocs}</div>\r\n                <div className=\"text-sm text-gray-600\">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center\">\r\n                <ChartBarIcon className=\"h-5 w-5 text-purple-600\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-gray-900\">{computed.totalComparisons}</div>\r\n                <div className=\"text-sm text-gray-600\">‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"h-10 w-10 rounded-lg bg-amber-100 flex items-center justify-center\">\r\n                <HashtagIcon className=\"h-5 w-5 text-amber-600\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-gray-900\">{computed.totalVersionsEstimated}</div>\r\n                <div className=\"text-sm text-gray-600\">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"h-10 w-10 rounded-lg bg-red-100 flex items-center justify-center\">\r\n                <ArchiveBoxIcon className=\"h-5 w-5 text-red-600\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-gray-900\">\r\n                  {computed.riskSummary.highDocs}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"grid lg:grid-cols-3 gap-6\">\r\n          {/* Left Column - Filters & Documents List */}\r\n          <div className=\"lg:col-span-2 space-y-6\">\r\n            {/* Filters */}\r\n            <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <FunnelIcon className=\"h-5 w-5 text-gray-700\" />\r\n                <h2 className=\"font-bold text-gray-900\">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á</h2>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</label>\r\n                  <div className=\"relative\">\r\n                    <MagnifyingGlassIcon className=\"h-5 w-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2\" />\r\n                    <input\r\n                      value={q}\r\n                      onChange={(e) => setQ(e.target.value)}\r\n                      placeholder=\"‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£...\"\r\n                      className=\"w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid md:grid-cols-2 gap-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</label>\r\n                    <select\r\n                      value={riskFilter}\r\n                      onChange={(e) => setRiskFilter(e.target.value as any)}\r\n                      className=\"w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white\"\r\n                    >\r\n                      <option value=\"ALL\">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                      <option value=\"HIGH\">HIGH</option>\r\n                      <option value=\"MEDIUM\">MEDIUM</option>\r\n                      <option value=\"LOW\">LOW</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</label>\r\n                    <select\r\n                      value={sort}\r\n                      onChange={(e) => setSort(e.target.value as any)}\r\n                      className=\"w-full px-3 py-2.5 border border-gray-300 rounded-lg bg-white\"\r\n                    >\r\n                      <option value=\"UPDATED_DESC\">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</option>\r\n                      <option value=\"NAME_ASC\">‡∏ä‡∏∑‡πà‡∏≠ A-Z</option>\r\n                      <option value=\"RISK_DESC\">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á-‡∏ï‡πà‡∏≥</option>\r\n                      <option value=\"CHANGES_DESC\">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"text-sm text-gray-600\">\r\n                  ‡πÅ‡∏™‡∏î‡∏á {computed.filtered.length} ‡∏à‡∏≤‡∏Å {computed.totalDocs} ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Documents List */}\r\n            <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\r\n              <div className=\"p-4 border-b border-gray-200\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <DocumentTextIcon className=\"h-5 w-5 text-gray-700\" />\r\n                  <h2 className=\"font-bold text-gray-900\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h2>\r\n                </div>\r\n              </div>\r\n\r\n              {loading ? (\r\n                <div className=\"p-8 text-center\">\r\n                  <ArrowPathIcon className=\"h-8 w-8 animate-spin mx-auto text-blue-600\" />\r\n                  <p className=\"mt-3 text-gray-600\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>\r\n                </div>\r\n              ) : computed.filtered.length === 0 ? (\r\n                <div className=\"p-8 text-center\">\r\n                  <p className=\"text-gray-600\">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"divide-y divide-gray-200\">\r\n                  {computed.filtered.slice(0, 20).map((doc) => (\r\n                    <div\r\n                      key={doc.doc}\r\n                      className={`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${\r\n                        selectedDoc === doc.doc ? \"bg-blue-50 border-l-4 border-blue-500\" : \"\"\r\n                      }`}\r\n                      onClick={() => setSelectedDoc(doc.doc)}\r\n                    >\r\n                      <div className=\"flex items-start justify-between gap-3\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <h3 className=\"text-lg font-bold text-gray-900 truncate\">{doc.doc}</h3>\r\n                            <RiskPill r={doc.lastRisk} />\r\n                          </div>\r\n\r\n                          <div className=\"flex flex-wrap items-center gap-2 text-sm text-gray-600 mb-3\">\r\n                            <span className=\"bg-gray-100 px-2 py-1 rounded text-xs font-medium\">\r\n                              {doc.comparisons} ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö\r\n                            </span>\r\n                            <span className=\"bg-gray-100 px-2 py-1 rounded text-xs font-medium\">\r\n                              {doc.versionsEstimated} ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô\r\n                            </span>\r\n                            <span className=\"font-bold text-gray-900\">\r\n                              {doc.totalChanges.toLocaleString()} ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"text-sm text-gray-600\">\r\n                            ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: {formatDateShort(doc.lastUpdatedISO)}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {doc.lastComparisonId && (\r\n                            <Link\r\n                              href={`/compare/${doc.lastComparisonId}`}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              className=\"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 font-medium\"\r\n                            >\r\n                              ‡∏î‡∏π‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\r\n                            </Link>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column - Document Details & Top Documents */}\r\n          <div className=\"space-y-6\">\r\n            {/* Selected Document Details */}\r\n            {computed.selectedDocDetails ? (\r\n              <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\r\n                <div className=\"p-4 border-b border-gray-200\">\r\n                  <h2 className=\"font-bold text-gray-900\">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h2>\r\n                </div>\r\n                \r\n                <div className=\"p-4\">\r\n                  <h3 className=\"text-lg font-bold text-gray-900 mb-4\">\r\n                    {computed.selectedDocDetails.doc}\r\n                  </h3>\r\n                  \r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <div className=\"text-sm text-gray-600 mb-1\">‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</div>\r\n                        <div className=\"text-xl font-bold text-gray-900\">\r\n                          {computed.selectedDocDetails.comparisons}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-sm text-gray-600 mb-1\">‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏ß‡∏°</div>\r\n                        <div className=\"text-xl font-bold text-gray-900\">\r\n                          {computed.selectedDocDetails.totalChanges.toLocaleString()}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-sm text-gray-600 mb-2\">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>\r\n                      <div className=\"text-sm font-medium text-gray-900 bg-gray-50 p-3 rounded-lg\">\r\n                        {computed.selectedDocDetails.lastFromTo}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-sm text-gray-600 mb-2\">‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>\r\n                      <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n                        {computed.selectedDocDetails.allComparisons\r\n                          .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\r\n                          .slice(0, 5)\r\n                          .map((comp) => (\r\n                            <Link\r\n                              key={comp.id}\r\n                              href={`/compare/${comp.id}`}\r\n                              className=\"block p-2 border border-gray-200 rounded hover:bg-gray-50\"\r\n                            >\r\n                              <div className=\"text-sm text-gray-900\">{comp.version_old_label} ‚Üí {comp.version_new_label}</div>\r\n                              <div className=\"text-xs text-gray-600\">{formatDateShort(comp.created_at)}</div>\r\n                            </Link>\r\n                          ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Link\r\n                      href=\"/history\"\r\n                      className=\"block w-full text-center py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium\"\r\n                    >\r\n                      ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"bg-white rounded-xl border border-gray-200 p-6 text-center\">\r\n                <DocumentTextIcon className=\"h-10 w-10 text-gray-400 mx-auto mb-3\" />\r\n                <h3 className=\"text-gray-700 font-medium\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h3>\r\n                <p className=\"text-sm text-gray-500 mt-1\">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Top Changed Documents */}\r\n            <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\r\n              <div className=\"p-4 border-b border-gray-200\">\r\n                <h2 className=\"font-bold text-gray-900\">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</h2>\r\n              </div>\r\n\r\n              <div className=\"divide-y divide-gray-200\">\r\n                {computed.topChanged.map((doc, index) => {\r\n                  const pct = clamp((doc.totalChanges / computed.maxChanges) * 100, 10, 100);\r\n                  return (\r\n                    <div key={doc.doc} className=\"p-4\">\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <span className=\"text-sm font-medium text-gray-500\">#{index + 1}</span>\r\n                            <h4 className=\"font-medium text-gray-900 truncate\">{doc.doc}</h4>\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-600\">\r\n                            {doc.totalChanges.toLocaleString()} ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className=\"h-full bg-gradient-to-r from-blue-500 to-purple-500\"\r\n                          style={{ width: `${pct}%` }}\r\n                        />\r\n                      </div>\r\n\r\n                      {doc.lastComparisonId && (\r\n                        <div className=\"mt-3\">\r\n                          <Link\r\n                            href={`/compare/${doc.lastComparisonId}`}\r\n                            className=\"text-sm text-blue-600 hover:text-blue-800 font-medium\"\r\n                          >\r\n                            ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‚Üí\r\n                          </Link>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer Note */}\r\n        <div className=\"mt-8 text-center text-sm text-gray-600\">\r\n          <p>‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏à‡∏≤‡∏Å {computed.totalComparisons} ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ‚Ä¢ ‡∏™‡∏£‡∏∏‡∏õ: {computed.totalDocs} ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‚Ä¢ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: {new Date().toLocaleTimeString(\"th-TH\")}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;AAGzB;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AA6BA,MAAM,WACJ,QAAQ,GAAG,CAAC,oBAAoB,EAAE,UAAU;AAE9C,SAAS,cAAc,CAAiB;IACtC,MAAM,IAAI,CAAC,KAAK,EAAE,EAAE,WAAW;IAC/B,IAAI,EAAE,QAAQ,CAAC,SAAS,OAAO;IAC/B,IAAI,EAAE,QAAQ,CAAC,WAAW,OAAO;IACjC,OAAO;AACT;AAEA,SAAS,WAAW,GAAW;IAC7B,IAAI;QACF,OAAO,IAAI,KAAK,KAAK,cAAc,CAAC,SAAS;YAC3C,OAAO;YACP,KAAK;YACL,MAAM;YACN,MAAM;YACN,QAAQ;QACV;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,gBAAgB,GAAW;IAClC,IAAI;QACF,OAAO,IAAI,KAAK,KAAK,kBAAkB,CAAC,SAAS;YAC/C,OAAO;YACP,KAAK;YACL,MAAM;QACR;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,UAAU,CAAM;IACvB,MAAM,IAAI,OAAO,KAAK;IACtB,IAAI,SAAS,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,EAAE,EAAE,UAAU,CAAC,KAAK,MAAM,CAAC,CAAC;IAC3D,OAAO;AACT;AAEA,SAAS,SAAS,EAAE,CAAC,EAAe;IAClC,MAAM,OACJ;IACF,IAAI,MAAM,QACR,qBAAO,8OAAC;QAAK,WAAW,GAAG,KAAK,sCAAsC,CAAC;kBAAE;;;;;;IAC3E,IAAI,MAAM,UACR,qBAAO,8OAAC;QAAK,WAAW,GAAG,KAAK,4CAA4C,CAAC;kBAAE;;;;;;IACjF,qBAAO,8OAAC;QAAK,WAAW,GAAG,KAAK,kDAAkD,CAAC;kBAAE;;;;;;AACvF;AAEA,SAAS,MAAM,CAAS,EAAE,GAAW,EAAE,GAAW;IAChD,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;AACrC;AAEA,uDAAuD;AACvD,SAAS,kBAAkB,EAAE,UAAU,EAAE,EAAE,UAAU,EAAE,EAA0C;IAC/F,MAAM,WAAW,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC;IACvC,MAAM,WAAW,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC;IAEvC,MAAM,SAAS,IAAI,IAAI,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IACtD,MAAM,SAAS,IAAI,IAAI,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IAEtD,qBACE,8OAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,MAAM;YACnB,MAAM,YAAY,CAAC,OAAO,GAAG,CAAC,KAAK,WAAW;YAE9C,qBACE,8OAAC;gBAEC,WACE,YACI,uEACA;0BAGL;eAPI;;;;;QAUX;;;;;;AAGN;AAEA,uDAAuD;AACvD,SAAS,qBAAqB,EAAE,UAAU,EAAE,EAAE,UAAU,EAAE,EAA0C;IAClG,MAAM,WAAW,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC;IACvC,MAAM,WAAW,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC;IAEvC,MAAM,SAAS,IAAI,IAAI,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW;IAEtD,qBACE,8OAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,MAAM;YACnB,MAAM,YAAY,CAAC,OAAO,GAAG,CAAC,KAAK,WAAW;YAE9C,qBACE,8OAAC;gBAEC,WACE,YACI,kEACA;0BAGL;eAPI;;;;;QAUX;;;;;;AAGN;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAmB,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAE9D,UAAU;IACV,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,iNAAQ,EAAC;IAC3B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAe;IAC3D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAC9B;IAGF,MAAM,mBAAmB;QACvB,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,sBAAsB,CAAC,EAAE;gBAAE,OAAO;YAAW;YACjF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC;YACzE,MAAM,OAAyB,MAAM,IAAI,IAAI;YAC7C,SAAS,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;QAC1C,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,WAAW;YACvB,SAAS,EAAE;QACb,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;IACA,uDAAuD;IACzD,GAAG,EAAE;IAEL,MAAM,WAAW,IAAA,gNAAO,EAAC;QACvB,MAAM,OAAO;eAAI;SAAM,CAAC,IAAI,CAC1B,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;QAgB7E,MAAM,QAAQ,IAAI;QAelB,KAAK,MAAM,KAAK,KAAM;YACpB,MAAM,MAAM,CAAC,EAAE,aAAa,IAAI,UAAU,EAAE,IAAI,MAAM;YACtD,MAAM,MAAM,MAAM,GAAG,CAAC,QAAS;gBAC7B;gBACA,aAAa;gBACb,MAAM,IAAI;gBACV,cAAc;gBACd,gBAAgB,EAAE,UAAU;gBAC5B,kBAAkB,EAAE,EAAE;gBACtB,UAAU,cAAc,EAAE,kBAAkB;gBAC5C,YAAY,GAAG,EAAE,iBAAiB,CAAC,GAAG,EAAE,EAAE,iBAAiB,EAAE;gBAC7D,gBAAgB,EAAE;YACpB;YAEA,IAAI,WAAW,IAAI;YACnB,IAAI,EAAE,iBAAiB,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,iBAAiB;YACzD,IAAI,EAAE,iBAAiB,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,iBAAiB;YACzD,IAAI,YAAY,IAAI,EAAE,aAAa,IAAI;YACvC,IAAI,cAAc,CAAC,IAAI,CAAC;YAExB,wDAAwD;YACxD,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM;gBACnB,IAAI,cAAc,GAAG,EAAE,UAAU;gBACjC,IAAI,gBAAgB,GAAG,EAAE,EAAE;gBAC3B,IAAI,QAAQ,GAAG,cAAc,EAAE,kBAAkB;gBACjD,IAAI,UAAU,GAAG,GAAG,EAAE,iBAAiB,CAAC,GAAG,EAAE,EAAE,iBAAiB,EAAE;YACpE;YAEA,MAAM,GAAG,CAAC,KAAK;QACjB;QAEA,MAAM,OAAiB;eAAI,MAAM,MAAM;SAAG,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;gBACrD,KAAK,EAAE,GAAG;gBACV,aAAa,EAAE,WAAW;gBAC1B,mBAAmB,EAAE,IAAI,CAAC,IAAI;gBAC9B,cAAc,EAAE,YAAY;gBAC5B,gBAAgB,EAAE,cAAc;gBAChC,kBAAkB,EAAE,gBAAgB;gBACpC,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,UAAU;gBACxB,gBAAgB,EAAE,cAAc;YAClC,CAAC;QAED,UAAU;QACV,MAAM,KAAK,EAAE,IAAI,GAAG,WAAW;QAC/B,IAAI,WAAW,KAAK,MAAM,CAAC,CAAC;YAC1B,MAAM,MAAM,CAAC,KAAK,OAAO,EAAE,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;YACtD,MAAM,SAAS,eAAe,QAAQ,OAAO,EAAE,QAAQ,KAAK;YAC5D,OAAO,OAAO;QAChB;QAEA,OAAO;QACP,MAAM,YAAY,CAAC,IAAa,MAAM,SAAS,IAAI,MAAM,WAAW,IAAI;QAExE,SAAS,IAAI,CAAC,CAAC,GAAG;YAChB,IAAI,SAAS,YAAY,OAAO,EAAE,GAAG,CAAC,aAAa,CAAC,EAAE,GAAG;YACzD,IAAI,SAAS,aAAa;gBACxB,MAAM,IAAI,UAAU,EAAE,QAAQ,IAAI,UAAU,EAAE,QAAQ;gBACtD,IAAI,MAAM,GAAG,OAAO;gBACpB,OAAO,IAAI,KAAK,EAAE,cAAc,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,cAAc,EAAE,OAAO;YAClF;YACA,IAAI,SAAS,gBAAgB;gBAC3B,OAAO,EAAE,YAAY,GAAG,EAAE,YAAY;YACxC;YACA,OAAO,IAAI,KAAK,EAAE,cAAc,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,cAAc,EAAE,OAAO;QAClF;QAEA,OAAO;QACP,MAAM,YAAY,KAAK,MAAM;QAC7B,MAAM,mBAAmB,KAAK,MAAM;QACpC,MAAM,yBAAyB,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,iBAAiB,EAAE;QAE9E,MAAM,WAAW,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,QAAQ,MAAM;QACjE,MAAM,UAAU,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,UAAU,MAAM;QAClE,MAAM,UAAU,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,OAAO,MAAM;QAE/D,cAAc;QACd,MAAM,aAAa;eAAI;SAAK,CACzB,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY,EAC9C,KAAK,CAAC,GAAG;QAEZ,MAAM,aAAa,KAAK,GAAG,CAAC,MAAM,WAAW,GAAG,CAAC,CAAC,IAAM,EAAE,YAAY;QAEtE,gCAAgC;QAChC,MAAM,qBAAqB,cACvB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,eACzB;QAEJ,OAAO;YACL;YACA;YACA;YACA;YACA;YACA,aAAa;gBAAE;gBAAU;gBAAS;YAAQ;YAC1C;YACA;YACA;YACA,gBAAgB;QAClB;IACF,GAAG;QAAC;QAAO;QAAG;QAAY;QAAM;KAAY;IAE5C,MAAM,kBAAkB;QACtB,MAAM,OAAO,SAAS,QAAQ;QAC9B,MAAM,UAAU;YACd;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,MAAM,MACJ;YAAC,QAAQ,IAAI,CAAC;SAAK,CAChB,MAAM,CACL,KAAK,GAAG,CAAC,CAAC,IACR;gBACE,UAAU,EAAE,GAAG;gBACf,UAAU,EAAE,WAAW;gBACvB,UAAU,EAAE,iBAAiB;gBAC7B,UAAU,EAAE,YAAY;gBACxB,UAAU,EAAE,cAAc;gBAC1B,UAAU,EAAE,QAAQ;gBACpB,UAAU,EAAE,UAAU;gBACtB,UAAU,EAAE,gBAAgB,IAAI;aACjC,CAAC,IAAI,CAAC,OAGV,IAAI,CAAC,QAAQ;QAElB,MAAM,OAAO,IAAI,KAAK;YAAC;SAAI,EAAE;YAAE,MAAM;QAAyB;QAC9D,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG,CAAC,iBAAiB,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC;QAC5E,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,EAAE,KAAK;QACP,EAAE,MAAM;QACR,IAAI,eAAe,CAAC;IACtB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,8OAAC;gDAAE,WAAU;0DAAqB;;;;;;;;;;;;kDAKpC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,SAAS;gDACT,UAAU;gDACV,WAAU;;kEAEV,8OAAC,0OAAa;wDAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,iBAAiB,IAAI;;;;;;oDAAI;;;;;;;0DAI1E,8OAAC;gDACC,SAAS;gDACT,UAAU,SAAS,QAAQ,CAAC,MAAM,KAAK;gDACvC,WAAU;;kEAEV,8OAAC,kQAAqB;wDAAC,WAAU;;;;;;oDAA6B;;;;;;;0DAIhE,8OAAC,uKAAI;gDACH,MAAK;gDACL,WAAU;;kEAEV,8OAAC,8NAAS;wDAAC,WAAU;;;;;;oDAA0B;;;;;;;;;;;;;;;;;;;4BAMpD,uBACC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,wQAAuB;4CAAC,WAAU;;;;;;sDACnC,8OAAC;;8DACC,8OAAC;oDAAI,WAAU;8DAAmC;;;;;;8DAClD,8OAAC;oDAAI,WAAU;8DAA6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BASxD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,mPAAgB;4CAAC,WAAU;;;;;;;;;;;kDAE9B,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAoC,SAAS,SAAS;;;;;;0DACrE,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;sCAK7C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,uOAAY;4CAAC,WAAU;;;;;;;;;;;kDAE1B,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAoC,SAAS,gBAAgB;;;;;;0DAC5E,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;sCAK7C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,oOAAW;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAoC,SAAS,sBAAsB;;;;;;0DAClF,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;sCAK7C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6OAAc;4CAAC,WAAU;;;;;;;;;;;kDAE5B,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DACZ,SAAS,WAAW,CAAC,QAAQ;;;;;;0DAEhC,8OAAC;gDAAI,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAO/C,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,iOAAU;oDAAC,WAAU;;;;;;8DACtB,8OAAC;oDAAG,WAAU;8DAA0B;;;;;;;;;;;;sDAG1C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAM,WAAU;sEAA+C;;;;;;sEAChE,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,4PAAmB;oEAAC,WAAU;;;;;;8EAC/B,8OAAC;oEACC,OAAO;oEACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;oEACpC,aAAY;oEACZ,WAAU;;;;;;;;;;;;;;;;;;8DAKhB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;;8EACC,8OAAC;oEAAM,WAAU;8EAA+C;;;;;;8EAChE,8OAAC;oEACC,OAAO;oEACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oEAC7C,WAAU;;sFAEV,8OAAC;4EAAO,OAAM;sFAAM;;;;;;sFACpB,8OAAC;4EAAO,OAAM;sFAAO;;;;;;sFACrB,8OAAC;4EAAO,OAAM;sFAAS;;;;;;sFACvB,8OAAC;4EAAO,OAAM;sFAAM;;;;;;;;;;;;;;;;;;sEAIxB,8OAAC;;8EACC,8OAAC;oEAAM,WAAU;8EAA+C;;;;;;8EAChE,8OAAC;oEACC,OAAO;oEACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oEACvC,WAAU;;sFAEV,8OAAC;4EAAO,OAAM;sFAAe;;;;;;sFAC7B,8OAAC;4EAAO,OAAM;sFAAW;;;;;;sFACzB,8OAAC;4EAAO,OAAM;sFAAY;;;;;;sFAC1B,8OAAC;4EAAO,OAAM;sFAAe;;;;;;;;;;;;;;;;;;;;;;;;8DAKnC,8OAAC;oDAAI,WAAU;;wDAAwB;wDAC/B,SAAS,QAAQ,CAAC,MAAM;wDAAC;wDAAM,SAAS,SAAS;wDAAC;;;;;;;;;;;;;;;;;;;8CAM9D,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,mPAAgB;wDAAC,WAAU;;;;;;kEAC5B,8OAAC;wDAAG,WAAU;kEAA0B;;;;;;;;;;;;;;;;;wCAI3C,wBACC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,0OAAa;oDAAC,WAAU;;;;;;8DACzB,8OAAC;oDAAE,WAAU;8DAAqB;;;;;;;;;;;mDAElC,SAAS,QAAQ,CAAC,MAAM,KAAK,kBAC/B,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAE,WAAU;0DAAgB;;;;;;;;;;iEAG/B,8OAAC;4CAAI,WAAU;sDACZ,SAAS,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,oBACnC,8OAAC;oDAEC,WAAW,CAAC,sDAAsD,EAChE,gBAAgB,IAAI,GAAG,GAAG,0CAA0C,IACpE;oDACF,SAAS,IAAM,eAAe,IAAI,GAAG;8DAErC,cAAA,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAG,WAAU;0FAA4C,IAAI,GAAG;;;;;;0FACjE,8OAAC;gFAAS,GAAG,IAAI,QAAQ;;;;;;;;;;;;kFAG3B,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;;oFACb,IAAI,WAAW;oFAAC;;;;;;;0FAEnB,8OAAC;gFAAK,WAAU;;oFACb,IAAI,iBAAiB;oFAAC;;;;;;;0FAEzB,8OAAC;gFAAK,WAAU;;oFACb,IAAI,YAAY,CAAC,cAAc;oFAAG;;;;;;;;;;;;;kFAIvC,8OAAC;wEAAI,WAAU;;4EAAwB;4EACtB,gBAAgB,IAAI,cAAc;;;;;;;;;;;;;0EAIrD,8OAAC;gEAAI,WAAU;0EACZ,IAAI,gBAAgB,kBACnB,8OAAC,uKAAI;oEACH,MAAM,CAAC,SAAS,EAAE,IAAI,gBAAgB,EAAE;oEACxC,SAAS,CAAC,IAAM,EAAE,eAAe;oEACjC,WAAU;8EACX;;;;;;;;;;;;;;;;;mDApCF,IAAI,GAAG;;;;;;;;;;;;;;;;;;;;;;sCAkDxB,8OAAC;4BAAI,WAAU;;gCAEZ,SAAS,kBAAkB,iBAC1B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAG,WAAU;0DAA0B;;;;;;;;;;;sDAG1C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DACX,SAAS,kBAAkB,CAAC,GAAG;;;;;;8DAGlC,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;sFACC,8OAAC;4EAAI,WAAU;sFAA6B;;;;;;sFAC5C,8OAAC;4EAAI,WAAU;sFACZ,SAAS,kBAAkB,CAAC,WAAW;;;;;;;;;;;;8EAG5C,8OAAC;;sFACC,8OAAC;4EAAI,WAAU;sFAA6B;;;;;;sFAC5C,8OAAC;4EAAI,WAAU;sFACZ,SAAS,kBAAkB,CAAC,YAAY,CAAC,cAAc;;;;;;;;;;;;;;;;;;sEAK9D,8OAAC;;8EACC,8OAAC;oEAAI,WAAU;8EAA6B;;;;;;8EAC5C,8OAAC;oEAAI,WAAU;8EACZ,SAAS,kBAAkB,CAAC,UAAU;;;;;;;;;;;;sEAI3C,8OAAC;;8EACC,8OAAC;oEAAI,WAAU;8EAA6B;;;;;;8EAC5C,8OAAC;oEAAI,WAAU;8EACZ,SAAS,kBAAkB,CAAC,cAAc,CACxC,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAChF,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,qBACJ,8OAAC,uKAAI;4EAEH,MAAM,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE;4EAC3B,WAAU;;8FAEV,8OAAC;oFAAI,WAAU;;wFAAyB,KAAK,iBAAiB;wFAAC;wFAAI,KAAK,iBAAiB;;;;;;;8FACzF,8OAAC;oFAAI,WAAU;8FAAyB,gBAAgB,KAAK,UAAU;;;;;;;2EALlE,KAAK,EAAE;;;;;;;;;;;;;;;;sEAWtB,8OAAC,uKAAI;4DACH,MAAK;4DACL,WAAU;sEACX;;;;;;;;;;;;;;;;;;;;;;;yDAOP,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,mPAAgB;4CAAC,WAAU;;;;;;sDAC5B,8OAAC;4CAAG,WAAU;sDAA4B;;;;;;sDAC1C,8OAAC;4CAAE,WAAU;sDAA6B;;;;;;;;;;;;8CAK9C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAG,WAAU;0DAA0B;;;;;;;;;;;sDAG1C,8OAAC;4CAAI,WAAU;sDACZ,SAAS,UAAU,CAAC,GAAG,CAAC,CAAC,KAAK;gDAC7B,MAAM,MAAM,MAAM,AAAC,IAAI,YAAY,GAAG,SAAS,UAAU,GAAI,KAAK,IAAI;gDACtE,qBACE,8OAAC;oDAAkB,WAAU;;sEAC3B,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAK,WAAU;;oFAAoC;oFAAE,QAAQ;;;;;;;0FAC9D,8OAAC;gFAAG,WAAU;0FAAsC,IAAI,GAAG;;;;;;;;;;;;kFAE7D,8OAAC;wEAAI,WAAU;;4EACZ,IAAI,YAAY,CAAC,cAAc;4EAAG;;;;;;;;;;;;;;;;;;sEAKzC,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC;gEACC,WAAU;gEACV,OAAO;oEAAE,OAAO,GAAG,IAAI,CAAC,CAAC;gEAAC;;;;;;;;;;;wDAI7B,IAAI,gBAAgB,kBACnB,8OAAC;4DAAI,WAAU;sEACb,cAAA,8OAAC,uKAAI;gEACH,MAAM,CAAC,SAAS,EAAE,IAAI,gBAAgB,EAAE;gEACxC,WAAU;0EACX;;;;;;;;;;;;mDAzBG,IAAI,GAAG;;;;;4CAgCrB;;;;;;;;;;;;;;;;;;;;;;;;8BAOR,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;;4BAAE;4BAAe,SAAS,gBAAgB;4BAAC;4BAAyB,SAAS,SAAS;4BAAC;4BAAyB,IAAI,OAAO,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;AAKzJ"}}]
}